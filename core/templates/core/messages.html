<h2>Chat</h2>

<div id="chat-box" style="border:1px solid #ccc; height:300px; overflow-y:auto; padding:10px;"></div>

<input id="chat-message-input" type="text" placeholder="Type message..." />
<button id="chat-message-submit">Send</button>

<script>
    const roomName = "{{ room_name }}";
    const chatSocket = new WebSocket(
    "ws://" + window.location.host + "/ws/chat/" + roomName + "/"
    );
    
    chatSocket.onmessage = function(e) {
    const data = JSON.parse(e.data);
    const chatBox = document.getElementById("chat-box");
    
    chatBox.innerHTML += `<p><b>${data.sender}:</b> ${data.message}</p>`;
    };
    
    document.getElementById("send-btn").onclick = function() {
    const input = document.getElementById("chat-input");
    chatSocket.send(JSON.stringify({
        "message": input.value
    }));
    input.value = "";
    };
    </script>
    