{% extends "core/base.html" %}

{% block title %}Connectly{% endblock %}

{% block content %}

<div class="feed-container">

  <!-- Create Post -->
  <div class="post-box">
    <h3>Create Post</h3>
    <form method="POST">
      {% csrf_token %}
      <textarea name="content" placeholder="What's on your mind?" required></textarea>
      <button type="submit" class="post-btn">Post</button>
    </form>
  </div>

  <!-- Posts -->
  {% for post in posts %}
  <div class="post-card">

    <!-- Post Header -->
    <div class="post-header">
      <a href="{% url 'profile' post.author.username %}" class="post-author">
        üë§ {{ post.author.username }}
      </a>
    </div>

    <!-- Post Content -->
    <div class="post-content">
      {{ post.content }}
    </div>

    <!-- Post Actions -->
    <div class="post-actions">
      <button class="like-btn" data-post="{{ post.id }}">
        ‚ù§Ô∏è <span>{{ post.like_set.count }}</span>
      </button>
    </div>

    <!-- Comments -->
    <div class="comments">
      {% for comment in post.comments.all %}
        <div class="comment">
          <strong>{{ comment.user.username }}</strong>
          <span>{{ comment.text }}</span>
        </div>
      {% endfor %}
    </div>

    <!-- Add Comment -->
    <form class="comment-form" data-post="{{ post.id }}">
      {% csrf_token %}
      <input type="text" placeholder="Write a comment..." required>
      <button type="submit">Send</button>
    </form>

  </div>
  {% endfor %}

</div>

{% endblock %}
